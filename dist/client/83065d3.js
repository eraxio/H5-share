(window.webpackJsonp=window.webpackJsonp||[]).push([[20,6],{339:function(e,t,n){var map={"./fb.png":340,"./ins.png":341,"./tg.png":342,"./twi.png":343,"./wx.png":344};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}r.keys=function(){return Object.keys(map)},r.resolve=o,e.exports=r,r.id=339},340:function(e,t,n){e.exports=n.p+"img/fb.c2a5aec.png"},341:function(e,t,n){e.exports=n.p+"img/ins.5d7280c.png"},342:function(e,t,n){e.exports=n.p+"img/tg.f50d1fe.png"},343:function(e,t,n){e.exports=n.p+"img/twi.1f95d97.png"},344:function(e,t,n){e.exports=n.p+"img/wx.e134823.png"},373:function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},432:function(e,t,n){var content=n(526);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(35).default)("579f0926",content,!0,{sourceMap:!1})},525:function(e,t,n){"use strict";n(432)},526:function(e,t,n){var r=n(34)(!1);r.push([e.i,".left-back[data-v-a2ca5d34] {\n  z-index: 999;\n  position: absolute;\n  width: 0.8rem;\n  height: 0.8rem;\n  left: 0.133333rem;\n  top: 0.133333rem;\n  padding: 0;\n  background: #ffffff;\n  border-radius: 0.133333rem;\n  box-shadow: 0 0 0.2rem 0 rgba(5, 0, 0, 0.15);\n}\n.o-mask[data-v-a2ca5d34] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.4);\n  z-index: 99999;\n  min-height: 100vh;\n}\n.o-mask .share-text[data-v-a2ca5d34] {\n  color: #FFFFFF;\n  text-align: center;\n  font-size: 0.746667rem;\n  position: fixed;\n}\n.o-mask .share-text.safari[data-v-a2ca5d34] {\n  left: 0;\n  right: 0;\n  bottom: 2.08rem;\n}\n.o-mask .share-text.other[data-v-a2ca5d34] {\n  top: 2.133333rem;\n  right: 0.666667rem;\n}\n.o-mask .fa-arrow-up[data-v-a2ca5d34] {\n  color: #FFFFFF;\n  position: fixed;\n  font-size: 2.08rem;\n}\n.o-mask .fa-arrow-up.safari[data-v-a2ca5d34] {\n  text-align: center;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  transform: rotateZ(180deg);\n}\n.o-mask .fa-arrow-up.other[data-v-a2ca5d34] {\n  right: 0.666667rem;\n  transform: rotateZ(30deg);\n}\n.o-share[data-v-a2ca5d34] {\n  position: fixed;\n  bottom: 0;\n  width: 10rem;\n  height: 4.693333rem;\n  opacity: 1;\n  background: #ffffff;\n  border-radius: 0.4rem 0.4rem 0 0;\n}\n.o-share .o-share-box[data-v-a2ca5d34] {\n  height: 3.36rem;\n  display: flex;\n}\n.o-share .o-share-box .o--ss[data-v-a2ca5d34] {\n  padding: 0.666667rem 0.333333rem;\n  text-align: center;\n}\n.o-share .o-share-box .o--ss .o--img[data-v-a2ca5d34] {\n  width: 1.2rem;\n  height: 1.2rem;\n  margin-bottom: 0.333333rem;\n}\n.o-share .o-share-cancel[data-v-a2ca5d34] {\n  height: 1.333333rem;\n  background: #eeeeee;\n  font-size: 0.4rem;\n  color: #1d1d1d;\n  line-height: 1.333333rem;\n  font-weight: 700;\n  text-align: center;\n}",""]),e.exports=r},551:function(e,t,n){"use strict";n.r(t);var r=n(11),o=(n(53),n(97),n(56),n(154),n(347),n(24),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(65),n(383)),c=n(372),d=n.n(c),l={name:"Share",components:{ElShare:o.default},asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.route,r=e.$axios,o=e.app,!n.query.iAnswerId){t.next=9;break}return t.next=4,r.post("/v1/emall/GetRewardsAnswerDetail",{iAnswerId:+n.query.iAnswerId});case 4:return c=t.sent,d=c.stRewardInfor,"https://share.erax.io",o.head.meta=o.head.meta.concat([{name:"twitter:card",content:"summary_large_image"},{property:"og:type",content:"website"},{property:"og:title",content:d.sSubject},{property:"og:description",content:d.sDescription},{property:"og:url",content:"https://share.erax.io"},{property:"og:image",content:d.vAnswer[0].sShareImg},{property:"og:image:width",content:375},{property:"og:image:height",content:711}]),t.abrupt("return",{sReward:d,shareList:[{key:"Telegram",icon:"tg"},{key:"Twitter",icon:"twi"},{key:"Facebook",icon:"fb"},{key:"Instagram",icon:"ins"},{key:"Wechat",icon:"wx"}],mask:!1});case 9:case"end":return t.stop()}}),t)})))()},data:function(){return{iAnswerId:+this.$route.query.iAnswerId,type:""}},computed:{},mounted:function(){var e=navigator.userAgent.toLowerCase();e.indexOf("applewebkit")>-1&&e.indexOf("mobile")>-1&&e.indexOf("safari")>-1&&-1===e.indexOf("linux")&&-1===e.indexOf("android")&&-1===e.indexOf("chrome")&&-1===e.indexOf("ios")&&-1===e.indexOf("browser")?this.type="safari":(console.log("不是Safari"),this.type="other")},methods:{handleInit:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.$nextTick(Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c,l,f,canvas,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window){n.next=2;break}return n.abrupt("return");case 2:return document.getElementById("sharePic"),r=document.getElementById("sharePic"),o=window.getComputedStyle(r),c=parseInt(o.width),l=parseInt(o.height),f=t.getDpr(),(canvas=document.createElement("canvas")).width=c*f,canvas.height=l*f,canvas.style.width=c+"px",canvas.style.height=l+"px",canvas.getContext("2d").scale(f,f),document.getElementById("app").style.width,document.getElementById("app").style.height,h=t,n.next=20,d()(r,{}).then((function(canvas){var t=canvas.toDataURL("image/png");h.uploadImage(t),h.handleShare(e)}));case 20:case"end":return n.stop()}}),n)}))));case 1:case"end":return n.stop()}}),n)})))()},getDpr:function(){return window.devicePixelRatio&&window.devicePixelRatio>1?window.devicePixelRatio:1},uploadImage:function(image){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,i,o,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=window.atob(image.split(",")[1]),r=[],i=0;i<n.length;i++)r.push(n.charCodeAt(i));return o=new Blob([new Uint8Array(r)],{type:"image/png"}),(c=new FormData).append("file",o,Date.now()+".png"),t.next=8,e.$axios.post("/v1/oss/PublicUpload",c);case 8:if(d=t.sent,console.log(d.vUrlPath),!d.vUrlPath.length){t.next=14;break}return t.next=13,e.$axios.post("v1/emall/Share",{iShareType:2,iRewardsId:e.iRewardsId,iAnswerId:e.iAnswerId,sShareImg:d.vUrlPath[0]});case 13:t.sent;case 14:case"end":return t.stop()}}),t)})))()},handleShare:function(e){var path=window.location.href.replace("shareControl=1","");switch(path+="&back=1&_t".concat((new Date).getTime()),path=encodeURIComponent(path),e.key){case"Telegram":window.open("https://telegram.me/share/url?url=".concat(path,"&text=").concat(this.sReward.sSubject));break;case"Facebook":window.open("https://www.facebook.com/sharer/sharer.php?u="+path);break;case"Twitter":window.open("https://twitter.com/intent/tweet?url=".concat(path,"&text=").concat(this.sReward.sSubject));break;default:this.mask=!0}},handleCancel:function(){this.$router.back()}}},f=(n(525),n(22)),component=Object(f.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.$route.params.noBack?e._e():r("van-button",{staticClass:"left-back",on:{click:function(t){return e.$router.replace("/")}}},[r("i",{staticClass:"fas fa-home"})]),e._v(" "),r("ElShare",{attrs:{sReward:e.sReward}}),e._v(" "),e.mask?r("div",{staticClass:"o-mask"},[r("van-button",{staticClass:"left-back",on:{click:function(t){e.mask=!1}}},[r("i",{staticClass:"fas fa-times"})]),e._v(" "),r("p",{class:["share-text",e.type]},[e._v(e._s(e.$t("Nav11")))]),e._v(" "),r("i",{class:["fas fa-arrow-up",e.type]})],1):e._e(),e._v(" "),e.$route.params.shareControl?r("div",{staticClass:"o-share"},[r("div",{staticClass:"o-share-box"},e._l(e.shareList,(function(t,o){return r("div",{key:o,staticClass:"o--ss",on:{click:function(n){return n.stopPropagation(),e.handleInit(t)}}},[r("img",{staticClass:"o--img",attrs:{src:n(339)("./"+t.icon+".png"),alt:""}}),e._v(" "),r("p",[e._v(e._s(t.key))])])})),0),e._v(" "),r("div",{staticClass:"o-share-cancel",on:{click:e.handleCancel}},[e._v("Cancel")])]):e._e()],1)}),[],!1,null,"a2ca5d34",null);t.default=component.exports}}]);