(window.webpackJsonp=window.webpackJsonp||[]).push([[10,6],{337:function(e,t,n){var content=n(375);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(35).default)("b8bcd40e",content,!0,{sourceMap:!1})},339:function(e,t,n){var map={"./fb.png":340,"./ins.png":341,"./tg.png":342,"./twi.png":343,"./wx.png":344};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}r.keys=function(){return Object.keys(map)},r.resolve=o,e.exports=r,r.id=339},340:function(e,t,n){e.exports=n.p+"img/fb.c2a5aec.png"},341:function(e,t,n){e.exports=n.p+"img/ins.5d7280c.png"},342:function(e,t,n){e.exports=n.p+"img/tg.f50d1fe.png"},343:function(e,t,n){e.exports=n.p+"img/twi.1f95d97.png"},344:function(e,t,n){e.exports=n.p+"img/wx.e134823.png"},373:function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},374:function(e,t,n){"use strict";n(337)},375:function(e,t,n){var r=n(34)(!1);r.push([e.i,".o-share-pic[data-v-0d6ad7bd] {\n  height: 100vh;\n  width: 100vw;\n  text-align: center;\n  z-index: 99999 !important;\n}\n.o-share[data-v-0d6ad7bd] {\n  position: fixed;\n  bottom: 0;\n  width: 10rem;\n  height: 4.693333rem;\n  opacity: 1;\n  background: #ffffff;\n  border-radius: 0.4rem 0.4rem 0 0;\n}\n.o-share .o-share-box[data-v-0d6ad7bd] {\n  height: 3.36rem;\n  display: flex;\n}\n.o-share .o-share-box .o--ss[data-v-0d6ad7bd] {\n  padding: 0.666667rem 0.333333rem;\n  text-align: center;\n}\n.o-share .o-share-box .o--ss .o--img[data-v-0d6ad7bd] {\n  width: 1.2rem;\n  height: 1.2rem;\n  margin-bottom: 0.333333rem;\n}\n.o-share .o-share-cancel[data-v-0d6ad7bd] {\n  height: 1.333333rem;\n  background: #eeeeee;\n  font-size: 0.4rem;\n  color: #1d1d1d;\n  line-height: 1.333333rem;\n  font-weight: 700;\n  text-align: center;\n}",""]),e.exports=r},380:function(e,t,n){"use strict";n.r(t);var r=n(11),o=(n(56),n(154),n(347),n(24),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(53),n(372)),c=n.n(o),d={name:"OSharePic",props:["value","iAnswerId","iRewardsId"],components:{ElShare:n(383).default},data:function(){return{isShow:!1,showShare:this.value,shareList:[{key:"Telegram",icon:"tg"},{key:"Twitter",icon:"twi"},{key:"Facebook",icon:"fb"},{key:"Instagram",icon:"ins"},{key:"Wechat",icon:"wx"}],qAvatar:"",aAvatar:"",oAnswerImg:"",vAnswer:{},vAnswerUser:{},image:""}},computed:{},watch:{value:function(e){this.showShare=e,this.isShow=e},iAnswerId:function(e){return e},iRewardsId:function(e){return e}},mounted:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{handleClosed:function(){this.$emit("input",!1),this.showShare=!1},handleCancel:function(){this.$emit("input",!1),this.showShare=!1},handleInit:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.$nextTick(Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,d,h,l,f,canvas,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window){n.next=2;break}return n.abrupt("return");case 2:return r=document.getElementById("sharePic"),o=document.getElementById("sharePic"),d=window.getComputedStyle(o),h=parseInt(d.width),l=parseInt(d.height),f=t.getDpr(),(canvas=document.createElement("canvas")).width=h*f,canvas.height=l*f,canvas.style.width=h+"px",canvas.style.height=l+"px",canvas.getContext("2d").scale(f,f),document.getElementById("app").style.width,document.getElementById("app").style.height,m=t,n.next=20,c()(o,{}).then((function(canvas){var t=canvas.toDataURL("image/png");m.uploadImage(t);var image=new Image;image.src=t,image.style.width="80%",document.getElementById("oShare").appendChild(image),r.style.display="none",m.handleShare(e)}));case 20:case"end":return n.stop()}}),n)}))));case 1:case"end":return n.stop()}}),n)})))()},getDpr:function(){return window.devicePixelRatio&&window.devicePixelRatio>1?window.devicePixelRatio:1},uploadImage:function(image){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,i,o,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=window.atob(image.split(",")[1]),r=[],i=0;i<n.length;i++)r.push(n.charCodeAt(i));return o=new Blob([new Uint8Array(r)],{type:"image/png"}),(c=new FormData).append("file",o,Date.now()+".png"),t.next=8,e.$axios.post("/v1/oss/PublicUpload",c);case 8:if(d=t.sent,console.log(d.vUrlPath),!d.vUrlPath.length){t.next=14;break}return t.next=13,e.$axios.post("v1/emall/Share",{iShareType:2,iRewardsId:e.iRewardsId,iAnswerId:e.iAnswerId,sShareImg:d.vUrlPath[0]});case 13:t.sent;case 14:case"end":return t.stop()}}),t)})))()},handleShare:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log(e),"Wechat"===e.key&&t.$router.push({path:"/share",query:{iAnswerId:t.iAnswerId}});case 2:case"end":return n.stop()}}),n)})))()}},updated:function(){}},h=(n(374),n(22)),component=Object(h.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("van-popup",{staticClass:"o-share-pic",attrs:{id:"oShare","get-container":"body"},on:{closed:e.handleClosed},model:{value:e.showShare,callback:function(t){e.showShare=t},expression:"showShare"}},[r("div",[r("ElShare",{attrs:{iAnswerId:e.iAnswerId}}),e._v(" "),r("div",{staticClass:"o-share"},[r("div",{staticClass:"o-share-box"},e._l(e.shareList,(function(t){return r("div",{staticClass:"o--ss",on:{click:function(n){return e.handleInit(t)}}},[r("img",{staticClass:"o--img",attrs:{src:n(339)("./"+t.icon+".png"),alt:""}}),e._v(" "),r("p",[e._v(e._s(t.key))])])})),0),e._v(" "),r("div",{staticClass:"o-share-cancel",on:{click:e.handleCancel}},[e._v("Cancel")])])],1)])}),[],!1,null,"0d6ad7bd",null);t.default=component.exports}}]);