{"version":3,"file":"components/cell-i-media2.js","sources":["webpack:///./components/cell/i-media2.vue?bce3","webpack:///./components/cell/i-media2.vue?41c1","webpack:///./components/cell/i-media2.vue?327a","webpack:///./components/cell/i-media2.vue","webpack:///./components/cell/i-media2.vue?e0e4","webpack:///./components/cell/i-media2.vue?40f1","webpack:///./components/cell/i-media2.vue?bc0a","webpack:///./assets/music.gif","webpack:///./assets/music_static.png"],"sourcesContent":["export * from \"-!../../node_modules/vue-style-loader/index.js??ref--5-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./i-media2.vue?vue&type=style&index=0&id=597d3476&lang=less&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".media[data-v-597d3476] {\\n  width: 100%;\\n  height: 100%;\\n  position: relative;\\n}\\n.el-image[data-v-597d3476] {\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n}\\n.media-container[data-v-597d3476] {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n}\\n.media-container .media-gif[data-v-597d3476] {\\n  width: 100%;\\n  height: 100%;\\n  object-fit: contain;\\n}\\n.media-container .media-control[data-v-597d3476] {\\n  position: absolute;\\n  right: 0;\\n  left: 0;\\n  bottom: 0.133333rem;\\n  color: #FFFFFF;\\n  font-size: 0.533333rem;\\n  height: 0.533333rem;\\n  display: flex;\\n  justify-content: center;\\n  z-index: 120;\\n}\\n.media-container .media-control-bar[data-v-597d3476] {\\n  bottom: 0;\\n  position: absolute;\\n  z-index: 10;\\n  height: 0.08rem;\\n  left: 0;\\n  background-color: #5b90ed;\\n}\\n[data-v-597d3476] .el-image__inner {\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n}\\n.video[data-v-597d3476] {\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n}\\naudio[data-v-597d3476] {\\n  width: 100%;\\n}\\n.sign[data-v-597d3476] {\\n  position: absolute;\\n  top: 0.266667rem;\\n  right: 0.266667rem;\\n  z-index: 1;\\n  font-size: 0.266667rem;\\n  text-shadow: 0 0 0.066667rem rgba(9, 1, 4, 0.3);\\n  color: #fff;\\n}\\n.popVideo[data-v-597d3476] {\\n  width: 100%;\\n}\\n.container[data-v-597d3476] {\\n  width: 100%;\\n  height: 100%;\\n  background: #f5f5f5;\\n}\", \"\"]);\n// Exports\nmodule.exports = ___CSS_LOADER_EXPORT___;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"media\"},[_vm._ssrNode(((_vm.getType() === 'img')?(\"<img\"+(_vm._ssrAttr(\"src\",_vm.url))+\" class=\\\"el-image\\\" data-v-597d3476>\"):\"<!---->\")+\" \"+((_vm.getType() === 'video')?(\"<div class=\\\"media-container\\\" data-v-597d3476><video loop=\\\"loop\\\"\"+(_vm._ssrAttr(\"src\",_vm.url))+\" webkit-playsinline=\\\"true\\\" playsinline=\\\"true\\\" x5-playsinline=\\\"true\\\"\"+(_vm._ssrAttr(\"poster\",_vm.url+'?vframe/jpg/offset/1'))+\" class=\\\"video\\\" data-v-597d3476></video></div>\"):\"<!---->\")+\" \"+((_vm.getType() === 'mp3')?(\"<div class=\\\"media-container\\\" data-v-597d3476>\"+((_vm.isPlaying)?(\"<img\"+(_vm._ssrAttr(\"src\",require(\"@/assets/music.gif\")))+\" alt class=\\\"media-gif\\\" data-v-597d3476>\"):(\"<img\"+(_vm._ssrAttr(\"src\",require(\"@/assets/music_static.png\")))+\" alt class=\\\"media-gif\\\" data-v-597d3476>\"))+\" <div class=\\\"media-control-bar\\\"\"+(_vm._ssrStyle(null,_vm.controlsWidth, null))+\" data-v-597d3476></div> <audio controls=\\\"controls\\\" loop=\\\"loop\\\"\"+(_vm._ssrAttr(\"src\",_vm.url))+(_vm._ssrStyle(null,null, { display: (false) ? '' : 'none' }))+\" data-v-597d3476></audio></div>\"):\"<!---->\")+\" \"),(_vm.getType() === 'mp3')?_c('van-icon',{staticClass:\"sign\",attrs:{\"name\":\"music-o\"}}):_vm._e(),_vm._ssrNode(\" \"),(_vm.getType() === 'video')?_c('van-icon',{staticClass:\"sign\",attrs:{\"name\":\"video-o\"}}):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {ImagePreview} from 'vant';\r\n\r\n// import * as THREE from \"three\";\r\n// import {GLTFLoader} from \"three/examples/jsm/loaders/GLTFLoader\";\r\n// import {OrbitControls} from \"three/examples/jsm/controls/OrbitControls\";\r\n\r\nexport default {\r\n  components: {\r\n    [ImagePreview.Component.name]: ImagePreview.Component,\r\n  },\r\n  props: {\r\n    url: {\r\n      type: String,\r\n      default: () => \"\",\r\n    },\r\n    isPopVideo: {\r\n      type: Boolean,\r\n      default: () => false,\r\n    },\r\n    isPopImg: {\r\n      type: Boolean,\r\n      default: () => false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      isPlaying: false,\r\n      //thress\r\n      camera: null,\r\n      scene: null,\r\n      renderer: null,\r\n      mush: null,\r\n      loader: null,\r\n      mixer: null,\r\n      // clock: new THREE.Clock(),\r\n      controls: null,\r\n      time: new Date().getTime(),\r\n      duration: 0,\r\n      currentTime: 0\r\n    };\r\n  },\r\n  computed: {\r\n    controlsWidth() {\r\n      return {\r\n        width: (this.currentTime / this.duration * 100).toFixed(2) + '%'\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.url) {\r\n      // this.init();\r\n      // this.render();\r\n    }\r\n  },\r\n  watch: {\r\n    url(ne, ol) {\r\n      if (!ne) return;\r\n      this.$nextTick(() => {\r\n        // this.init();\r\n        // this.render();\r\n      })\r\n    },\r\n  },\r\n  methods: {\r\n    handleShowPic() {\r\n      ImagePreview([this.url]);\r\n    },\r\n    getDuration() {\r\n      if (this.$refs.player) {\r\n        this.duration = this.$refs.player.duration;\r\n      }\r\n    },\r\n    updateTime(e) {\r\n      this.currentTime = e.target.currentTime;\r\n    },\r\n    handleOnePlay() {\r\n      if (this.isPlaying) {\r\n        this.$refs.player.pause()\r\n        this.isPlaying = false\r\n      } else {\r\n        this.$refs.player.play()\r\n        this.isPlaying = true\r\n      }\r\n    },\r\n    getType() {\r\n      if (/\\.(gif|jpg|jpeg|png|GIF|JPEG|JPG|PNG|svg|SVG)$/.test(this.url)) {\r\n        return \"img\";\r\n      } else if (\r\n        /\\.(mp4|webm|wav|ogg|MP4|MOV|WEBM|WAV|OGG)$/.test(this.url)\r\n      ) {\r\n        return \"video\";\r\n      } else if (/\\.(mp3|MP3)$/.test(this.url)) {\r\n        return 'mp3';\r\n      } else {\r\n        return \"3D\";\r\n      }\r\n    },\r\n    createRect() {\r\n      let geometry = new THREE.PlaneGeometry(1000, 1000);\r\n      let material = new THREE.MeshBasicMaterial({color: 0xAAAAAA});\r\n      let rect = new THREE.Mesh(geometry, material);\r\n      return rect;\r\n    },\r\n\r\n    handleClose() {\r\n      this.$refs.popvideo.pause();\r\n      this.dialogVisible = false;\r\n    },\r\n    playVideo() {\r\n      if (!this.isPopVideo) return false;\r\n      this.dialogVisible = true;\r\n      this.$nextTick(() => {\r\n        this.$refs.popvideo.currentTime = 0;\r\n        this.$refs.popvideo.play();\r\n      });\r\n    },\r\n    // 模型初始化\r\n    init() {\r\n      if (this.getType() !== \"3D\") {\r\n        return;\r\n      }\r\n      let container = document.getElementById(\"container\" + this.time);\r\n\r\n      // 设置相机\r\n      this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\r\n\r\n      this.camera.position.z = 5;\r\n      this.scene = new THREE.Scene();\r\n      let self = this;\r\n\r\n\r\n      // 加载模型\r\n      var loader = new GLTFLoader();//.setPath(\"/static/dalou/\");\r\n      //   loader.setCrossOrigin( 'anonymous' )\r\n      // loader.setCrossOrigin( 'use-credentials' )\r\n      loader.load(this.url, gltf => {\r\n        //   loader.load('./static/Bee.glb', gltf=> {\r\n        // console.log('-------------' + gltf);\r\n        this.scene.add(gltf.scene);\r\n\r\n      });\r\n\r\n      var light = new THREE.AmbientLight(0x404040, 10); // soft white light\r\n      this.scene.add(light);\r\n\r\n      var directionalLight = new THREE.DirectionalLight(0xffffff);\r\n      this.scene.add(directionalLight);\r\n\r\n\r\n      var spotLight = new THREE.SpotLight(0xffffff);\r\n      spotLight.position.set(100, 1000, 100);\r\n\r\n      spotLight.castShadow = true;\r\n\r\n      spotLight.shadow.mapSize.width = 1024;\r\n      spotLight.shadow.mapSize.height = 1024;\r\n\r\n      spotLight.shadow.camera.near = 500;\r\n      spotLight.shadow.camera.far = 4000;\r\n      spotLight.shadow.camera.fov = 30;\r\n\r\n      this.scene.add(spotLight);\r\n\r\n\r\n      var light = new THREE.PointLight(0xff0000, 1, 100);\r\n      light.position.set(50, 50, 50);\r\n      this.scene.add(light);\r\n\r\n\r\n      /**\r\n       * 相机设置\r\n       */\r\n      var width = window.innerWidth; //窗口宽度\r\n      var height = window.innerHeight; //窗口高度\r\n      var k = width / height; //窗口宽高比\r\n      var s = 150; //三维场景显示范围控制系数，系数越大，显示的范围越大\r\n\r\n      this.renderer = new THREE.WebGLRenderer({antialias: true});\r\n      this.renderer.setSize(container.clientWidth, container.clientHeight);\r\n      container.appendChild(this.renderer.domElement);\r\n      this.controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n    },\r\n    render() {\r\n      if (this.getType() !== \"3D\") {\r\n        return;\r\n      }\r\n      requestAnimationFrame(this.render);\r\n      this.renderer.render(this.scene, this.camera); //执行渲染操作\r\n\r\n    },\r\n  },\r\n};\r\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./i-media2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./i-media2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./i-media2.vue?vue&type=template&id=597d3476&scoped=true&\"\nimport script from \"./i-media2.vue?vue&type=script&lang=js&\"\nexport * from \"./i-media2.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./i-media2.vue?vue&type=style&index=0&id=597d3476&lang=less&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"597d3476\",\n  \"6493cebc\"\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--5-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--5-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--5-oneOf-1-3!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./i-media2.vue?vue&type=style&index=0&id=597d3476&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"69b05978\", content, true, context)\n};","module.exports = __webpack_public_path__ + \"img/music.899c6a2.gif\";","module.exports = __webpack_public_path__ + \"img/music_static.e8a2f61.png\";"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AATA;AACA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AAgBA;AACA;AAAA;AACA;AACA;AACA;AADA;AAGA;AACA;AANA;AACA;AAMA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AARA;AASA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AAEA;AACA;AAGA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AAGA;AACA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AA/HA;AA1DA;;AC9CA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACXA;;;;;;;ACAA;;;;A","sourceRoot":""}