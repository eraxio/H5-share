exports.ids = [3];
exports.modules = {

/***/ 100:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_i_media2_vue_vue_type_style_index_0_id_597d3476_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(95);
/* harmony import */ var _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_i_media2_vue_vue_type_style_index_0_id_597d3476_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_i_media2_vue_vue_type_style_index_0_id_597d3476_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_i_media2_vue_vue_type_style_index_0_id_597d3476_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__) if(["default"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _node_modules_vue_style_loader_index_js_ref_5_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_5_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_5_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_5_oneOf_1_3_node_modules_nuxt_components_dist_loader_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_i_media2_vue_vue_type_style_index_0_id_597d3476_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__[key]; }) }(__WEBPACK_IMPORT_KEY__));


/***/ }),

/***/ 101:
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(3);
var ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(false);
// Module
___CSS_LOADER_EXPORT___.push([module.i, ".media[data-v-597d3476] {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n.el-image[data-v-597d3476] {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n.media-container[data-v-597d3476] {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n.media-container .media-gif[data-v-597d3476] {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n}\n.media-container .media-control[data-v-597d3476] {\n  position: absolute;\n  right: 0;\n  left: 0;\n  bottom: 0.133333rem;\n  color: #FFFFFF;\n  font-size: 0.533333rem;\n  height: 0.533333rem;\n  display: flex;\n  justify-content: center;\n  z-index: 120;\n}\n.media-container .media-control-bar[data-v-597d3476] {\n  bottom: 0;\n  position: absolute;\n  z-index: 10;\n  height: 0.08rem;\n  left: 0;\n  background-color: #5b90ed;\n}\n[data-v-597d3476] .el-image__inner {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n.video[data-v-597d3476] {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\naudio[data-v-597d3476] {\n  width: 100%;\n}\n.sign[data-v-597d3476] {\n  position: absolute;\n  top: 0.266667rem;\n  right: 0.266667rem;\n  z-index: 1;\n  font-size: 0.266667rem;\n  text-shadow: 0 0 0.066667rem rgba(9, 1, 4, 0.3);\n  color: #fff;\n}\n.popVideo[data-v-597d3476] {\n  width: 100%;\n}\n.container[data-v-597d3476] {\n  width: 100%;\n  height: 100%;\n  background: #f5f5f5;\n}", ""]);
// Exports
module.exports = ___CSS_LOADER_EXPORT___;


/***/ }),

/***/ 102:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./components/cell/i-media2.vue?vue&type=template&id=597d3476&scoped=true&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"media"},[_vm._ssrNode(((_vm.getType() === 'img')?("<img"+(_vm._ssrAttr("src",_vm.url))+" class=\"el-image\" data-v-597d3476>"):"<!---->")+" "+((_vm.getType() === 'video')?("<div class=\"media-container\" data-v-597d3476><video loop=\"loop\""+(_vm._ssrAttr("src",_vm.url))+" webkit-playsinline=\"true\" playsinline=\"true\" x5-playsinline=\"true\""+(_vm._ssrAttr("poster",_vm.url+'?vframe/jpg/offset/1'))+" class=\"video\" data-v-597d3476></video></div>"):"<!---->")+" "+((_vm.getType() === 'mp3')?("<div class=\"media-container\" data-v-597d3476>"+((_vm.isPlaying)?("<img"+(_vm._ssrAttr("src",__webpack_require__(98)))+" alt class=\"media-gif\" data-v-597d3476>"):("<img"+(_vm._ssrAttr("src",__webpack_require__(99)))+" alt class=\"media-gif\" data-v-597d3476>"))+" <div class=\"media-control-bar\""+(_vm._ssrStyle(null,_vm.controlsWidth, null))+" data-v-597d3476></div> <audio controls=\"controls\" loop=\"loop\""+(_vm._ssrAttr("src",_vm.url))+(_vm._ssrStyle(null,null, { display: (false) ? undefined : 'none' }))+" data-v-597d3476></audio></div>"):"<!---->")+" "),(_vm.getType() === 'mp3')?_c('van-icon',{staticClass:"sign",attrs:{"name":"music-o"}}):_vm._e(),_vm._ssrNode(" "),(_vm.getType() === 'video')?_c('van-icon',{staticClass:"sign",attrs:{"name":"video-o"}}):_vm._e()],2)}
var staticRenderFns = []


// CONCATENATED MODULE: ./components/cell/i-media2.vue?vue&type=template&id=597d3476&scoped=true&

// EXTERNAL MODULE: external "vant"
var external_vant_ = __webpack_require__(18);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./components/cell/i-media2.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
 // import * as THREE from "three";
// import {GLTFLoader} from "three/examples/jsm/loaders/GLTFLoader";
// import {OrbitControls} from "three/examples/jsm/controls/OrbitControls";

/* harmony default export */ var i_media2vue_type_script_lang_js_ = ({
  components: {
    [external_vant_["ImagePreview"].Component.name]: external_vant_["ImagePreview"].Component
  },
  props: {
    url: {
      type: String,
      default: () => ""
    },
    isPopVideo: {
      type: Boolean,
      default: () => false
    },
    isPopImg: {
      type: Boolean,
      default: () => false
    }
  },

  data() {
    return {
      dialogVisible: false,
      isPlaying: false,
      //thress
      camera: null,
      scene: null,
      renderer: null,
      mush: null,
      loader: null,
      mixer: null,
      // clock: new THREE.Clock(),
      controls: null,
      time: new Date().getTime(),
      duration: 0,
      currentTime: 0
    };
  },

  computed: {
    controlsWidth() {
      return {
        width: (this.currentTime / this.duration * 100).toFixed(2) + '%'
      };
    }

  },

  mounted() {
    if (this.url) {// this.init();
      // this.render();
    }
  },

  watch: {
    url(ne, ol) {
      if (!ne) return;
      this.$nextTick(() => {// this.init();
        // this.render();
      });
    }

  },
  methods: {
    handleShowPic() {
      Object(external_vant_["ImagePreview"])([this.url]);
    },

    getDuration() {
      if (this.$refs.player) {
        this.duration = this.$refs.player.duration;
      }
    },

    updateTime(e) {
      this.currentTime = e.target.currentTime;
    },

    handleOnePlay() {
      if (this.isPlaying) {
        this.$refs.player.pause();
        this.isPlaying = false;
      } else {
        this.$refs.player.play();
        this.isPlaying = true;
      }
    },

    getType() {
      if (/\.(gif|jpg|jpeg|png|GIF|JPEG|JPG|PNG|svg|SVG)$/.test(this.url)) {
        return "img";
      } else if (/\.(mp4|webm|wav|ogg|MP4|MOV|WEBM|WAV|OGG)$/.test(this.url)) {
        return "video";
      } else if (/\.(mp3|MP3)$/.test(this.url)) {
        return 'mp3';
      } else {
        return "3D";
      }
    },

    createRect() {
      let geometry = new THREE.PlaneGeometry(1000, 1000);
      let material = new THREE.MeshBasicMaterial({
        color: 0xAAAAAA
      });
      let rect = new THREE.Mesh(geometry, material);
      return rect;
    },

    handleClose() {
      this.$refs.popvideo.pause();
      this.dialogVisible = false;
    },

    playVideo() {
      if (!this.isPopVideo) return false;
      this.dialogVisible = true;
      this.$nextTick(() => {
        this.$refs.popvideo.currentTime = 0;
        this.$refs.popvideo.play();
      });
    },

    // 模型初始化
    init() {
      if (this.getType() !== "3D") {
        return;
      }

      let container = document.getElementById("container" + this.time); // 设置相机

      this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      this.camera.position.z = 5;
      this.scene = new THREE.Scene();
      let self = this; // 加载模型

      var loader = new GLTFLoader(); //.setPath("/static/dalou/");
      //   loader.setCrossOrigin( 'anonymous' )
      // loader.setCrossOrigin( 'use-credentials' )

      loader.load(this.url, gltf => {
        //   loader.load('./static/Bee.glb', gltf=> {
        // console.log('-------------' + gltf);
        this.scene.add(gltf.scene);
      });
      var light = new THREE.AmbientLight(0x404040, 10); // soft white light

      this.scene.add(light);
      var directionalLight = new THREE.DirectionalLight(0xffffff);
      this.scene.add(directionalLight);
      var spotLight = new THREE.SpotLight(0xffffff);
      spotLight.position.set(100, 1000, 100);
      spotLight.castShadow = true;
      spotLight.shadow.mapSize.width = 1024;
      spotLight.shadow.mapSize.height = 1024;
      spotLight.shadow.camera.near = 500;
      spotLight.shadow.camera.far = 4000;
      spotLight.shadow.camera.fov = 30;
      this.scene.add(spotLight);
      var light = new THREE.PointLight(0xff0000, 1, 100);
      light.position.set(50, 50, 50);
      this.scene.add(light);
      /**
       * 相机设置
       */

      var width = window.innerWidth; //窗口宽度

      var height = window.innerHeight; //窗口高度

      var k = width / height; //窗口宽高比

      var s = 150; //三维场景显示范围控制系数，系数越大，显示的范围越大

      this.renderer = new THREE.WebGLRenderer({
        antialias: true
      });
      this.renderer.setSize(container.clientWidth, container.clientHeight);
      container.appendChild(this.renderer.domElement);
      this.controls = new OrbitControls(this.camera, this.renderer.domElement);
    },

    render() {
      if (this.getType() !== "3D") {
        return;
      }

      requestAnimationFrame(this.render);
      this.renderer.render(this.scene, this.camera); //执行渲染操作
    }

  }
});
// CONCATENATED MODULE: ./components/cell/i-media2.vue?vue&type=script&lang=js&
 /* harmony default export */ var cell_i_media2vue_type_script_lang_js_ = (i_media2vue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(1);

// CONCATENATED MODULE: ./components/cell/i-media2.vue



function injectStyles (context) {
  
  var style0 = __webpack_require__(100)
if (style0.__inject__) style0.__inject__(context)

}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  cell_i_media2vue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  injectStyles,
  "597d3476",
  "6493cebc"
  
)

/* harmony default export */ var i_media2 = __webpack_exports__["default"] = (component.exports);

/***/ }),

/***/ 95:
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(101);
if(content.__esModule) content = content.default;
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add CSS to SSR context
var add = __webpack_require__(4).default
module.exports.__inject__ = function (context) {
  add("69b05978", content, true, context)
};

/***/ }),

/***/ 98:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "img/music.899c6a2.gif";

/***/ }),

/***/ 99:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "img/music_static.e8a2f61.png";

/***/ })

};;
//# sourceMappingURL=cell-i-media2.js.map